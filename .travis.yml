language: node_js
node_js:
 - "9.4.0"
services:
  - docker
  - rabbitmq
before_script:
  - cd ./Docker && sudo docker-compose up -d && cd ..
  - npm run build
  - npm run start:ci > /dev/null 2>&1 &
  - git clone git@github.com:poetapp/node.git
  - cd ./node
  - sudo make ipfs
  - sleep 5
  - npm install
  - npm run build
  - npm start > /dev/null 2>&1 &
  - cd ..
  - git clone git@github.com:poetapp/frost-api-ci.git
  - cd frost-api-ci && npm install
  - cd ..
script:
  - npm run lint
  - cd ./frost-api-ci && npm run test
